(this["webpackJsonp@tesco/finance-frontend"]=this["webpackJsonp@tesco/finance-frontend"]||[]).push([[0],{12:function(e,t){t.BASE_URL="xllr.co.uk",t.PRODUCTION_SERVICES="http://".concat(this.BASE_URL,"/api/production/services"),t.PUBLIC_SOCK="ws://".concat(this.BASE_URL,"/api/realtime/public")},49:function(e,t,c){},51:function(e,t,c){},74:function(e,t,c){},75:function(e,t,c){},80:function(e,t,c){},81:function(e,t,c){"use strict";c.r(t);var n=c(1),a=c.n(n),s=c(40),i=c.n(s),r=c(15),o=c(5),l=(c(49),c(0));function j(e){return Object(l.jsx)("div",{className:"d-flex flex-column",children:Object(l.jsx)("ul",{className:"footer__column",children:e.children})})}function d(){return Object(l.jsxs)("footer",{children:[Object(l.jsx)("div",{className:"footer-main",children:Object(l.jsxs)("div",{className:"footer__container",children:[Object(l.jsxs)(j,{children:[Object(l.jsx)("li",{children:"Here to help"}),Object(l.jsx)("li",{children:"Contact us"}),Object(l.jsx)("li",{children:"Help and FAQs"})]}),Object(l.jsxs)(j,{children:[Object(l.jsx)("li",{children:"About Tesco"}),Object(l.jsx)("li",{children:"Store Vacancies"}),Object(l.jsx)("li",{children:"Careers"}),Object(l.jsx)("li",{children:"Tesco PLC"}),Object(l.jsx)("li",{children:"Sustainability"})]}),Object(l.jsxs)(j,{children:[Object(l.jsx)("li",{children:"Stocks and Shares"}),Object(l.jsx)("li",{children:"News"}),Object(l.jsx)("li",{children:"Tesco PLC"}),Object(l.jsx)("li",{children:"Stock Screeener"}),Object(l.jsx)("li",{children:"Accessibility"})]}),Object(l.jsxs)(j,{children:[Object(l.jsx)("li",{children:"Tesco Finance"}),Object(l.jsx)("li",{children:"About"}),Object(l.jsx)("li",{children:"Terms and Conditions"}),Object(l.jsx)("li",{children:"Privacy and Cookie Policy"}),Object(l.jsx)("li",{children:"Site Map"})]})]})}),Object(l.jsx)("div",{className:"footer-suffix",children:"\xa9 Arvin Abdollahzadeh 2021"})]})}c(51);var u=c(4),b=c(11),h=c(23),O=c(22),m=c(21),f=c.n(m),x=c(12),p=Object(n.createContext)(),g=function(e){Object(h.a)(c,e);var t=Object(O.a)(c);function c(){return Object(b.a)(this,c),t.apply(this,arguments)}return c}(f.a);function v(e){var t=Object(n.useState)(null),c=Object(u.a)(t,2),a=(c[0],c[1]),s=Object(n.useState)(!1),i=Object(u.a)(s,2),r=i[0],o=i[1],j=Object(n.useState)([]),d=Object(u.a)(j,2),b=d[0],h=d[1],O=Object(n.useState)([]),m=Object(u.a)(O,2),f=(m[0],m[1],Object(n.useState)(new g)),v=Object(u.a)(f,2),S=v[0];v[1];return Object(n.useEffect)((function(){var e=setInterval((function(){o(!r)}),1e4),t=new WebSocket(x.PUBLIC_SOCK);t.onopen=function(){t.onmessage=function(e){var t=JSON.parse(e.data);"R"===t.ev&&h(t.recv),"A"===t.ev&&S.emit("t",t)},a(t),clearInterval(e),t.onclose=function(){a(null),e=setInterval((function(){o(!r)}),5e3)}}}),[r]),Object(l.jsx)(p.Provider,{value:{recv:b,stockManager:S},children:e.children})}var S=c(26),N=c.n(S),y=c(41),k=c(17),_=c(14),w=c.n(_),C=new(function(){function e(){var t=this;Object(b.a)(this,e),_.defaults.headers.common.Authorization=localStorage.getItem("access_token"),_.get(x.PRODUCTION_SERVICES).then((function(e){t.services=e.data,t.services.forEach((function(e){t["".concat(e.name.toLowerCase(),"API")]=_.create({baseURL:"https://".concat(e.accessPoints[0].replace("%PUBLIC_URL%",x.BASE_URL)),validateStatus:function(e){return e>=200&&e<300},xsrfCookieName:"XSRF-TOKEN"})}))}))}return Object(k.a)(e,[{key:"build",value:function(){var e=this;return new Promise((function(t,c){_.get(x.PRODUCTION_SERVICES).then((function(c){e.services=c.data,e.services.forEach(function(){var t=Object(y.a)(N.a.mark((function t(c){return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e["".concat(c.name.toLowerCase(),"API")]=_.create({baseURL:"http://".concat(c.accessPoints[0].replace("%PUBLIC_URL%",x.BASE_URL)),validateStatus:function(e){return e>=200&&e<300},xsrfCookieName:"XSRF-TOKEN"});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),t(e)}))}))}},{key:"setDefaults",value:function(e){var t=this;this.services.forEach((function(c){t["".concat(c.name.toLowerCase(),"API")].defaults.headers.common.Authorization="Bearer ".concat(e)}))}}]),e}());var A=Object(o.e)((function(e){var t=e.ticker,c=Object(n.useContext)(p).stockManager,a=Object(n.useState)(0),s=Object(u.a)(a,2),i=s[0],r=s[1],o=Object(n.useState)({}),j=Object(u.a)(o,2),d=j[0],b=j[1];return Object(n.useEffect)((function(){C.publicAPI.get("/ticker?ticker=".concat(t)).then((function(e){r(e.data.data.lastTrade.price),b(e.data.data)})),c.on("t",(function(e){e.sym===t&&r([e.a,i])})),setInterval((function(){C.publicAPI.get("/ticker?ticker=".concat(t)).then((function(e){r(e.data.data.lastTrade.price),b(e.data.data)}))}),2e4)}),[]),Object(l.jsx)("li",{className:"global-header__list-item",children:Object(l.jsxs)("div",{className:"global-header__stock-item",onClick:function(){return e.history.push("/tickers/".concat(t))},children:[Object(l.jsxs)("span",{children:[t," ",Object(l.jsxs)("strong",{children:["$",parseFloat(i).toFixed(2)]})]}),void 0!==d.closed||d.closed?Object(l.jsx)("span",{className:"stock-red",children:"Market Closed"}):Object(l.jsxs)("span",{className:"".concat(d.todaysChangePerc>0?"stock-green":"stock-red"),children:[d.todaysChangePerc>0?"+":"",parseFloat(d.todaysChangePerc).toFixed(2),"% (",parseFloat(d.todaysChange).toFixed(2),")"]})]})})}));var P=Object(o.e)((function(){var e=Object(n.useContext)(p),t=e.recv;return e.prices,void 0!==t&&t.length?Object(l.jsx)("div",{className:"global-header",children:Object(l.jsx)("div",{className:"container",children:Object(l.jsx)("ul",{className:"global-header__list",children:t.map((function(e){return Object(l.jsx)(A,{ticker:e})}))})})}):Object(l.jsx)("div",{className:"global-header",children:Object(l.jsx)("div",{className:"container",children:Object(l.jsx)("ul",{className:"global-header__list",children:Object(l.jsx)("li",{className:"global-header__list-item",children:Object(l.jsxs)("span",{children:[Object(l.jsx)("strong",{children:"Tesco Finance"})," loading Market Data"]})})})})})})),E=(c(74),c.p+"static/media/logo.8a510a2c.svg");c(75);var I=Object(o.e)((function(e){var t=e.values,c=e.onBlur,n=e.onFocus;return Object(l.jsx)("div",{className:"search__autocomplete",onMouseLeave:c,onMouseEnter:n,children:t.map((function(t){return Object(l.jsx)("div",{className:"search__autocomplete-item",onClick:function(){e.history.push("/tickers/".concat(t.ticker))},children:Object(l.jsxs)("span",{children:[Object(l.jsx)("strong",{children:t.ticker})," ",t.name]})})}))})}));function L(e){var t=Object(n.useState)([]),c=Object(u.a)(t,2),a=c[0],s=c[1],i=Object(n.useState)(""),r=Object(u.a)(i,2),o=r[0],j=r[1],d=Object(n.useState)(!1),b=Object(u.a)(d,2),h=b[0],O=b[1],m=Object(n.useState)(!0),f=Object(u.a)(m,2),x=(f[0],f[1],e.visible),p=e.setVisible,g=function(e){O(!0),j(e.target.value),""===e.target.value&&s([]),C.queryAPI.get("/tickers?q=".concat(e.target.value)).then((function(e){s(e.data.data.tickers)}))},v=e.placeholder;return Object(l.jsxs)("span",{className:"text-field",onFocus:function(){O(!0),console.log("On search"),p(!0),g({target:{value:o}})},value:o,onBlur:function(){O(!1),console.log("Left search")},children:[Object(l.jsx)("input",{className:"text-field-input",placeholder:v,onChange:g}),a.length&&(x||h)?Object(l.jsx)(I,{values:a,onBlur:function(){p(!1),console.log("Invisible")},onFocus:function(){p(!0),console.log("Visible")}}):""]})}var R=c(18);function T(e){var t=e.onClick,c=e.icon,n=e.className;return Object(l.jsx)("span",{className:"link-btn btn-primary icon-only br-100 ".concat(n),style:{marginLeft:10},onClick:t,children:Object(l.jsx)(R.a,{icon:c})})}var B=c(13);function U(e){var t=e.to,c=e.children;return Object(l.jsx)(r.b,{to:t,className:"navbar-link",children:Object(l.jsx)("span",{children:c})})}var F=function(e){Object(h.a)(c,e);var t=Object(O.a)(c);function c(){return Object(b.a)(this,c),t.apply(this,arguments)}return c}(f.a),V=Object(n.createContext)(),z=w.a.create({baseURL:"http://identity.api.".concat(x.BASE_URL)});function D(e){var t=Object(n.useState)(null),c=Object(u.a)(t,2),a=c[0],s=c[1],i=Object(n.useState)(localStorage.getItem("access_token")||null),r=Object(u.a)(i,2),o=r[0],j=r[1],d=Object(n.useState)(new F),b=Object(u.a)(d,2),h=b[0];b[1];Object(n.useEffect)((function(){o?z.get("/me",{headers:{Authorization:"Bearer ".concat(o)}}).then((function(e){h.emit("login"),s(e.data.data)})).catch((function(e){j(null),C.setDefaults(""),h.emit("logout")})):h.emit("logout"),h.on("logout",(function(){C.setDefaults(""),s(null),j(""),localStorage.removeItem("access_token")})),h.on("login",(function(){C.services.forEach((function(e){C["".concat(e.name.toLowerCase(),"API")].defaults.headers.common.Authorization="Bearer ".concat(o)}))}))}),[]);var O=function(){j(""),C.setDefaults(""),h.emit("logout")};Object(n.useEffect)((function(){m().then((function(e){return s(e.data.data)})).catch(O)}),[o]);var m=function(){return new Promise((function(e,t){z.get("/me",{headers:{Authorization:"Bearer ".concat(o)}}).then((function(t){return e})).catch(t)}))};return Object(l.jsx)(V.Provider,{value:{authService:h,user:a,tryLogin:function(e,t){return new Promise((function(c,n){z.post("/authenticate",{emailAddress:e,password:t}).then((function(e){j(e.data.access_token),C.build().then((function(t){t.setDefaults(e.data.access_token),localStorage.setItem("access_token",e.data.access_token),h.emit("login")}))})).catch(n)}))},logout:O,getSelf:m,tryRegister:function(e){var t=e.emailAddress,c=e.firstName,n=e.lastName,a=e.password;return new Promise((function(e,s){z.post("/register",{emailAddress:t,password:a,firstName:c,lastName:n}).then((function(t){h.emit("login"),j(t.data.access_token),localStorage.setItem("access_token",t.data.access_token),C.setDefaults(t.data.access_token),e(t.data.access_token)})).catch(s)}))},tryVerifyEmail:function(e){return new Promise((function(t,c){z.post("/verify",{code:e}).then((function(e){m().then((function(e){return s(e.data.data)})).catch(c),t(e)})).catch(c)}))}},children:e.children})}var M=Object(o.e)((function(e){var t=Object(n.useState)(!1),c=Object(u.a)(t,2),a=c[0],s=c[1],i=Object(n.useContext)(V).user;return Object(l.jsx)("div",{className:"navbar-wrapper",children:Object(l.jsx)("div",{className:"navbar-main",children:Object(l.jsx)("div",{className:"navbar-container",children:Object(l.jsxs)("div",{className:"navbar-heading",children:[Object(l.jsxs)(r.b,{to:"/",className:"logo",children:[Object(l.jsx)("img",{src:E,alt:"Tesco"}),Object(l.jsx)("span",{className:"navbar-heading__signpost",children:"Finance"})]}),Object(l.jsxs)("div",{className:"navbar-heading__widgets",children:[Object(l.jsxs)("div",{className:"navbar__links",children:[Object(l.jsx)(U,{to:"/about",children:"About"}),Object(l.jsx)(U,{to:"/news",children:"News"}),Object(l.jsx)(U,{to:"/contacts",children:"Contacts"})]}),Object(l.jsxs)("div",{className:"search-wrapper",children:[Object(l.jsx)(L,{placeholder:"Search for Symbols or Companies",visible:a,setVisible:s}),Object(l.jsx)(T,{icon:B.c}),Object(l.jsx)(T,{icon:B.d,onClick:i?e.history.push("/account"):function(){return e.history.push("/auth")}}),Object(l.jsx)(T,{icon:B.a,className:"navbar-menu-button__mobile"})]})]})]})})})})}));function H(){return Object(l.jsxs)("header",{children:[Object(l.jsx)(P,{}),Object(l.jsx)(M,{})]})}var K=Object(o.e)((function(e){var t=Object(n.useContext)(V),c=t.tryLogin,a=t.authService,s=(t.tryRegister,t.tryVerifyEmail,Object(n.useState)(!1)),i=Object(u.a)(s,2),r=i[0],o=i[1],j=Object(n.useState)(""),d=Object(u.a)(j,2),b=d[0],h=(d[1],Object(n.useState)({})),O=Object(u.a)(h,2),m=O[0],f=O[1];Object(n.useEffect)((function(){a.on("login",(function(){return e.history.push("/")}))}),[]);var x=function(e,t){var c=m;c[t]=e.target.value,f(c)};return Object(l.jsx)("div",{className:"container-md login__container",children:Object(l.jsxs)("div",{className:"login__wrapper",children:[Object(l.jsxs)("div",{className:"login-descriptor__container",children:[Object(l.jsx)("span",{children:r?Object(l.jsx)("strong",{children:"Sign in to your account"}):Object(l.jsx)("strong",{children:"Sign up for an account"})}),r?Object(l.jsxs)("span",{className:"small",children:["New to Tesco Finance?"," ",Object(l.jsx)("strong",{className:"link-tag",onClick:function(){return o(!r)},children:"Register for an account"})]}):Object(l.jsxs)("span",{className:"small",children:["Have an account?"," ",Object(l.jsx)("strong",{className:"link-tag",onClick:function(){return o(!r)},children:"Sign in to your account"})]})]}),Object(l.jsx)("div",{className:"login__form",children:Object(l.jsxs)("div",{className:"form-container",children:[Object(l.jsx)("label",{for:"login-email",children:"Email Address"}),Object(l.jsx)("input",{type:"email",placeholder:"Email Address",id:"login-email",onChange:function(e){return x(e,"emailAddress")}}),Object(l.jsx)("label",{for:"login-pwd",children:"Password"}),Object(l.jsx)("input",{type:"password",id:"login-pwd",onChange:function(e){return x(e,"password")}}),null!==b?Object(l.jsx)("span",{className:"small red",style:{paddingTop:10},children:b}):"",Object(l.jsx)("span",{style:{fontSize:"1.2em",lineHeight:1,color:"white",border:"2px solid white",borderRadius:100,padding:"9px 14px",marginTop:10,position:"relative",width:r?71:80,userSelect:"none",cursor:"pointer"},className:"btn-primary",onClick:function(){c(m.emailAddress,m.password)},children:Object(l.jsxs)("span",{style:{top:-1.5,position:"relative"},children:[r?Object(l.jsx)(l.Fragment,{children:"Sign in "}):Object(l.jsx)(l.Fragment,{children:"Sign up "}),Object(l.jsx)(R.a,{className:"action-i-login",icon:B.b})]})})]})})]})})})),q=c(43),J=c.n(q);var Q=function(e){var t=e.match,c=Object(n.useState)({}),a=Object(u.a)(c,2),s=a[0],i=a[1],r=Object(n.useState)([]),o=Object(u.a)(r,2),j=o[0],d=o[1],b=Object(n.useState)(!1),h=Object(u.a)(b,2),O=h[0],m=h[1];return Object(n.useEffect)((function(){C.build().then((function(e){e.marketAPI.get("/symbols/".concat(t.params.ticker,"/trades")).then((function(e){var t=e.data.data.map((function(e){return{open:e.o,close:e.c,high:e.h,low:e.l,time:parseInt((new Date(e.t).getTime()/1e3).toFixed(0))}}));d(t),m(!0)})).catch((function(e){return m(!1)})),e.marketAPI.get("/symbols/".concat(t.params.ticker,"/company")).then((function(e){i(e.data.data)}))}))}),[t.params.ticker]),Object(l.jsxs)("div",{className:"container-md",style:{paddingTop:40,paddingBottom:40},children:[Object(l.jsxs)("div",{className:"flex flex-column",children:[Object(l.jsxs)("span",{className:"heading-primary",children:[s.name," ",Object(l.jsxs)("strong",{children:["(",s.symbol,")"]})]}),Object(l.jsx)("span",{className:"small",style:{color:"#707070"},children:s.description}),Object(l.jsxs)("span",{children:[s.exchange," (",s.exchangeSymbol,") realtime data. All currencies in USD."]})]}),O?Object(l.jsx)(J.a,{options:{alignLabels:!0,timeScale:{rightOffset:12,barSpacing:3,fixLeftEdge:!0,lockVisibleTimeRangeOnResize:!0,rightBarStaysOnScroll:!0,borderVisible:!1,borderColor:"#fff000",visible:!0,timeVisible:!0,secondsVisible:!1}},candlestickSeries:[{data:j}],height:500,autoWidth:!0}):""]})},W=c(29),X=c.p+"static/media/blue.8327dee9.jpg";function $(){return Object(n.useEffect)((function(){Object(W.jarallaxVideo)(),Object(W.jarallax)(document.querySelectorAll(".jarallax"),{speed:.2,videoSrc:"https://www.youtube.com/watch?v=7LN6fQVRpK4",imgSrc:X})}),[]),Object(l.jsx)("div",{children:Object(l.jsx)("div",{style:{height:"calc(86.3vh)"},className:"jarallax",children:Object(l.jsxs)("div",{style:{position:"absolute",top:0,left:0,height:"100%",width:"100%",background:"linear-gradient(40deg,rgba(3, 149, 233, 0.7),rgba(48,63,159,.2))",zIndex:1},className:"homepage-hero__jarallax",children:[Object(l.jsx)("div",{className:"container y-auto",style:{flex:1,marginTop:15},children:Object(l.jsx)("div",{style:{background:"var(--tesco-white-secondary)",padding:"8px 10px",borderRadius:10},children:Object(l.jsx)("span",{style:{fontSize:"1em",width:"75%",color:"var(--tesco-red)"},children:"Only US markets are supported at this stage. Please be aware that errors will occur at this stage of development."})})}),Object(l.jsxs)("div",{className:"container y-auto",style:{marginBottom:"33vh"},children:[Object(l.jsx)("div",{children:Object(l.jsxs)("span",{style:{fontSize:"2.4em",width:"75%",color:"white"},children:["Shape your trading portfolio with"," ",Object(l.jsxs)("strong",{children:["Tesco",Object(l.jsx)("span",{style:{color:"var(--tesco-red)"},children:"."})]})]})}),Object(l.jsx)("div",{className:"homepage-hero__secondary",children:Object(l.jsx)("span",{style:{fontSize:"1.4em",lineHeight:1,color:"white",border:"2px solid white",borderRadius:100,padding:"9px 14px",position:"relative",userSelect:"none",cursor:"pointer"},className:"secondary-btn",children:Object(l.jsxs)("span",{style:{top:-1.5,position:"relative"},children:["Sign up"," ",Object(l.jsx)(R.a,{className:"action-i",icon:B.b})]})})})]})]})})})}var G=function(){return Object(n.useEffect)((function(){C.build()}),[]),Object(l.jsx)(r.a,{children:Object(l.jsx)(v,{children:Object(l.jsxs)(D,{children:[Object(l.jsx)(H,{}),Object(l.jsx)(o.a,{path:"/",exact:!0,component:$}),Object(l.jsx)(o.a,{path:"/tickers/:ticker",component:Q}),Object(l.jsx)(o.a,{path:"/auth",component:K}),Object(l.jsx)(d,{})]})})})};c(80);i.a.render(Object(l.jsx)(a.a.StrictMode,{children:Object(l.jsx)(G,{})}),document.getElementById("root"))}},[[81,1,2]]]);